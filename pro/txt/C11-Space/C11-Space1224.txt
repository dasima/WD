航空制造技术
AERONAUTICAL　MANUFACTURING　TECHNOLOGY
1999年　第5期　no.5　1999




开放式数控系统――新一代NC的主流
游有鹏　董伟杰　张晓峰　王　珉
　　［摘要］　在分析传统数控封闭体系结构固有不足的基础上，引入了开放式数控系统的概念，并对其技术特征和开放途径进行了探讨。简要介绍了国外开放式数控的研究动态，指出了开展开放式数控研究对国产数控技术进步的重要意义。
　　关键词：CNC　开放式体系结构　制造技术
Open Architecture CNC――Main Trend of New Generation NC
　　［ABSTRACT］After analyzing the drawbacks of closed architecture CNC, this paper introduces the concept and characteristics of open architecture CNC. The approaches to implement open CNC are discussed and a brief survey is also given about the development in open CNC. Furthermore, it is pointed out that the researches on open architecture CNC is very important to our national CNC development.
　　Keywords: CNC　Open architecture　Manufacturing technology
　　计算机数控（CNC)系统作为制造形状复杂、高质量、高精度产品所必备的基础设备，已成为当今先进制造技术的一个重要组成部分。然而，现今市场上组成CNC系统（以FANUC，SIEMENS等为代表）的硬件模块和软件结构绝大多数是专用的、互不兼容的，系统各模块间的交互方式、通信机制也各不相同，这就造成了不同厂家控制系统的相对独立、彼此封闭。
　　随着技术的进步，市场竞争的加剧，这种专用体系结构的数控系统越来越暴露出其固有的缺陷。一方面，各控制系统间互连能力差，影响了系统的相互集成，风格不一的操作方式以及专用件的大量使用，不但使用户培训费用增加，还给数控设备用户（NC系统的最终用户）带来很多不便；另一方面，系统的封闭性使它的扩充和修改极为有限，造成数控设备制造商（NC系统中间用户）对系统供应商的依赖，并难以将自己的专门技术、工艺经验集成入控制系统并形成自己的产品特点，这将不利于提高主机产品的竞争力。此外，专用的硬、软件结构也限制了系统本身的持续开发，使系统的开发投资大、周期长、风险高、更新换代慢，不利于数控产品的技术进步。总之，数控系统的这一现状已不能适应当今制造业市场变化与竞争，也不能满足现代制造业向信息化、敏捷制造模式发展的需要。
1　数控系统开放的概念及途径
1.1　概念
　　研究开放式数控系统的主要目的是解决变化频繁的需求与封闭控制系统之间的矛盾，从而建立一个统一的可重构的系统平台，增强数控系统的柔性。通俗地讲，开放的目的就是使NC控制器与当今的PC机类似，系统构筑于一个开放的平台之上，具有模块化组织结构，允许用户根据需要进行选配和集成，更改或扩展系统的功能迅速适应不同的应用需求，而且，组成系统的各功能模块可以来源于不同的部件供应商并相互兼容。
　　事实上，基于上述指导思想的开放式数控系统也符合IEEE关于开放式系统的定义：能够在多种平台上运行，可以和其他系统互操作，并能给用户提供一种统一风格的交互方式。根据这一定义，开放式数控系统应具有以下基本特征：
　　（1）可互操作性。通过提供标准化接口、通信和交互机制，使不同功能模块能以标准的应用程序接口运行于系统平台之上，并获得平等的相互操作能力，协调工作。
　　（2）可移植性。系统的功能软件与设备无关，即应用统一的数据格式、交互模型、控制机理，使构成系统的各功能模块可来源于不同的开发商，并且通过一致的设备接口，使各功能模块能运行于不同供应商提供的硬件平台之上。
　　（3）档次皆宜性。CNC系统的功能、规模可以灵活设置，方便修改，既可以增加硬件或软件构成功能更强的系统，也可以裁减其功能以适应低端应用。
　　（4）可互补性。指构成系统的各硬件模块、功能软件的选用不受单一供应商的控制，可根据其功能、可靠性及性能要求相互替换，而不影响系统整体的协调运行。
1.2　开放途径
　　如何使传统的专用型封闭式系统走向开放，不同的系统开发商及研究机构对此提出了一些解决方案。按开放的层次不同可分3种途径，它们的开放层次不同，难度不等，获得的开放效果也相差很大。如图1所示，虚线将控制系统划分为人机控制（Man-Machine Control,MMC)层和控制内核层两个层面。其中，控制内核是CNC系统完成实时加工过程调度和控制的核心部分，一般和系统实时性相联系。3种方式就是基于对这两个层面开放的不同处理来区分的。

图1　控制系统的开放途径
Fig.1　Approaches to implement the open CNC
　　（1）开放人机控制接口。
　　这种方式允许开发商或用户构造或集成自己的模块到人机控制接口（Man-Machine Interface,MMI)中。这一手段为用户提供灵活制定适用于各自特殊要求的操作界面和操作步骤的途径，一般使用于基于PC作为图形化人机控制界面的系统中。
　　（2）开放系统核心接口。
　　此方式除了提供上述方式的开放性能外，还允许用户添加自己特殊的模块到控制核心模块中。通过开放系统的核心接口，用户可按照一定的规范将自己特有的控制软件模块加到系统预先留出的内核接口上。
　　（3）开放体系结构。
　　开放体系结构的解决方案是一种更彻底的开放方案。它试图提供从软件到硬件，从人机操作界面到底层控制内核的全方位开放。人们可以在开放体系结构的标准及一系列规范的指导下，按需配置成功能可繁简、性能可高低、价格可控制、不依赖于单一卖方的总成系统。
　　从实现方法上，PC-NC（个人计算机数控）是目前比较现实的NC开放化的途径。也就是在PC机硬件平台和操作系统的基础上，使用市售的软件和硬件插卡，构造出数控系统功能。但是，现有PC的操作系统缺乏实时性，可靠性尚有待提高。PC-NC主要可归纳为3种：NC板插入到PC中、PC板插入NC装置中、软件NC。NC板插入PC中的形式，就是将运动控制板或整个CNC单元（包括集成的PLC)插入到个人计算机的扩展槽中。PC机作非实时处理，实时控制由CNC单元或运动控制板来承担，这种方法能够方便地实现人机界面的开放化和个性化，即上述第1层次的开放；在此基础上，借助于所插入NC板的可编程能力，能部分实现系统核心接口的开放，即上述第2层次的开放。PC板插入NC中这一形式，主要为一些大型CNC控制器制造商所采用。其原因有两方面：一是许多用户对他们的产品很熟悉，也习惯使用；另一方面是控制器制造商不可能在短时间内放弃他们传统的专用CNC技术。因此，才出现了这种折中方案，其做法就是在传统的CNC中提供PC前端接口，使其具有PC处理的柔性。显然，这种系统的NC内核保持了原有的封闭性，故只能实现上述第1层次的开放。所谓软件NC，是指NC系统的各项功能，如编译、解释、插补和PLC等，均由软件模块来实现。这类系统借助现有的操作系统平台（如DOS，Windows等），在应用软件（如Visual C＋＋，Visual Basic等）的支持下，通过对NC软件的适当组织、划分、规范和开发，可望实现上述各个层次的开放。
　　应该指出，将开放系统的概念引入CNC系统的发展需求中，表明系统走向开放的条件日趋成熟。然而，具有开放系统特征的开放体系结构CNC系统仍处在成长期，有关开放体系结构CNC系统科学、明确的定义及相应的规范标准尚处在进一步的发展完善中。
2　研究动态
　　控制系统的开放式结构的出现将导致新一代控制器的产生，并成为未来制造业的一大支柱。因此，欧美及日本各国都相继进行了大量研究工作，并出台了各自的开放式体系结构规范。
　　1989年，美国由政府资助的NGC（Next Generation Controller)研究计划，作为开放性结构控制器的标准提案受到了广泛关注。NGC与传统CNC的显著差别是它基于“开放体系结构”，其首要目标是开发“开放式系统体系结构标准规范”（Specification for an Open System Architecture Standard, SOSAS)，此规范用来管理工作站和机床控制器的设计和结构组织。NGC计划于1994年完成了原型研究，并转入了工业开发应用。例如，美国Ford，GM和Chrylser等公司在NGC计划的指导下，联合提出了OMAC(Open Modular Architecture Controller)开发计划。该计划定义了一个应用于汽车工业的开放、模块化体系结构控制器的规范，其硬件继承了VME系列的VMS。尽管目前还不够完善，但由于“API的接口层”的标准化，使用户能够充分发挥自己的主动性，从而可装入自己所需的独特功能；甚至可以装入Windows OS，将CAM等现有的PC机资源移植到控制器中；同时，利用实时数据库，可以实现数据的高效、便携化，具有极高的实用价值。实现OMAC的好处在于能减少投资和生产周期的费用，容易将市场化的通用技术与用户自身的专有技术融为一体，从而能高效地重构用于新程序的控制器，使得不断涌现的新技术能及时植入。
　　与NGC同步，日本一项面向21世纪制造产业的长期研究计划――智能制造系统（Intelligent Manufacturing System,IMS)也在讨论中，该项计划由日本工业界领导，同时，也与其他国家合作。1990年，日本IMS中心成立。1994年，历时10年的IMS计划日程表发表并开始启动，大部分计划都与先进制造系统与自动化相关，如多功能机床系统、敏捷制造系统、基于知识的人工智能表达式系统和智能监控系统等。这些计划对将来控制系统技术的发展将产生深远影响。同时，日本还启动了另一项开放系统计划――OSEC(Open System Environment for Controller)计划。其主要内容是基于PC平台的开放式系统，宗旨就在于确定“不依赖于特定卖主的开放性控制器”的结构。这一计划由3家机床企业（东芝机械、丰田工机、山崎）与3家信息系统开发企业（日本IBM、三菱电机、SML）发起，提出了控制器的分层模型，明确了各层次模块的功能、服务内容及接口规范。此外，还定义了一种新的NC语言――FADL语言。目前，该组织已经发展到由18家公司和一家社团共同参与的致力于推进CNC系统开放化的协会。
　　面对国际市场的形势和制造业的发展趋势，欧洲采取的对策是：联合起来发挥各家的长处，积极吸收世界上各种新技术，开发满足世界市场尤其是亚洲市场的产品。要达到这一目的，首先要具有能容纳或联合各家技术的新型控制器。早在1987年11月，在德国机床厂联合会（VDW）的支持下，就曾由斯图加特大学的制造控制技术研究所（ISW)对“未来控制技术”进行了研究，提出的新型控制器方案的原则为：可组配、模块化和开放式。1991年10月，一项涉及欧洲各国的控制系统计划OSACA（Open System Architecture for Control within Automation System)开始启动，它是欧洲各国的合作计划，立足于提高机床和控制系统制造商在世界市场中的竞争力。项目工期从1992年5月到1996年5月，历时48个月。其主要任务是制定一个与制造商无关的开放控制系统结构。OSACA计划的成功将减少新产品的上市时间，提供更强的客户定制功能和柔性程度，减少了开发、维护、培训和文档建立的费用。
3　结束语
　　采用开放式控制系统结构对数控系统的生产厂家和用户都有好处。对于控制系统生产厂家，他们可在共同的标准平台上建立广泛的合作，实现协作式开发，大大缩短了系统的开发周期，降低了成本，增强了产品竞争力；对于机床生产厂，不仅可以根据需要配置最合适的控制系统，还可将自己独特的软件集成到系统控制器，形成自己的产品特色；最终用户可以说是开放式控制系统的最大受益者，他们可以最大限度地按照自己的需要选择产品，配备合适的功能部件，实现系统的集成和扩展，同时，开放也使系统的操作、维护更为方便。此外，控制器的结构开放性也为数控技术能持续不断地吸收日新月异的计算机硬软件最新成果创造了条件，有利于数控产品自身的更新换代，提高性能，增强竞争力。这也正是开放式NC控制器之所以被各发达国家视为重要的战略技术、纷纷投入研究的重要原因。
　　我国是一个机床生产和应用大国，但数控技术的应用水平还不高，严重制约着我国制造业水平的提高。国际上的相关开发计划对我国的数控技术的发展提出了严峻的挑战，同时也带来了机遇。首先，开放系统计划的实施，把世界上所有系统开发商推到了同一起跑线上。在这个起跑线上，我们可以建立以国际采购为思路的系统集成开发之路，为我国制造高性能、高可靠性CNC系统创造条件；其次，通过一致的编程应用界面，容易形成自己的集成方案，进一步减小对卖方市场的依赖性。此外，随着开放系统计划的实施，统一开发平台的建立，将来CNC系统的高技术附加值将主要体现在软件上，为我国发展民族软件产业创造了一个良好的契机。我们应充分把握机会，扬长避短，迎头赶上，研制出适合我国国情的新一代国产高性能CNC控制器。
作者单位：游有鹏　董伟杰　张晓峰　王　珉　南京航空航天大学机电工程学院
参考文献
　1　徐守祥.开放式数控系统――欧洲数控业的发展策略.制造技术与机床，1997（3）
　2　李爱平，张曙.开放式CNC的概念和应用.制造技术与机床，1997(3)
　3　刘　利（编译）.当前NC的热点――开放化和PC化.机电一体化，1998(1)
　4　Prischow G, Daniel Ch, Junghans G, et al. Open system controllers――a challenge for the future of the machine tool industry. Annals of the CIRP, 1993,42(1)
　5　Altintas Y, Munasinghe W K. A mierarchical open-architecture CNC system for machine tools. Annals of the CIRP,1994,43(1)
　6　Park J, Pasek Z J, Shan Y, et al. An open architecture real-time controller for machining processes. Proceedings of the 27th CIRP ISMS, 1995.51～58,27～34
　7　Szafarczyk M. An open architecture real_time controller for machining processes. Proceedings of the 27th CIRP ISMS, 1995.45～50
（责编　小　目）
