计算机研究与发展
JOURNAL OF COMPUTER RESEARCH AND DEVELOPMENT
1999　Vol.36　No.6　P.737-744



支持资源预定的多目通信的路由算法及其性能分析
黄浩　杜建成　谢立　孙钟秀
摘　要：目前Internet上的路由协议仅支持“尽力传送服务”.新型的应用问题如视屏会议、分布式模拟等需要有保障的服务质量.资源预定协议如RSVP等可以用来提供有保障的服务质量，但是它需要有新的路由协议.文中研究了支持资源预定的多目通信的路由问题，提出了两个路由算法.算法2采用了避免使用高负载链路的机制，从而使得多目通信的通信树的分配成功率有很大的提高.文中还给出了模拟实验的结果，并对其进行了分析.
关键词：单目通信， 多目通信， 资源预定， 服务质量
分类号：TP393
MULTIPOINT TO MULTIPOINT COMMUNICATION ROUTING
SCHEME AND PERFORMANCE ANALYSIS
HUANG Hao，DU Jian-Cheng，XIE Li，SUN Zhong-Xiu
(State Key Laboratory for Novel Software Technology, Nanjing University, Nanjing 210093)
(Department of Computer Science and Technology, Nanjing University, Nanjing 210093)
Abstract：The current routing protocols in the Internet only support “best effort service”. New applications, such as videoconference and distributed emulation, need guaranteed quality of service. Resource reservation protocols such as RSVP are used to guarantee the quality of service, but they need new routing protocols to cooperate with them. In the paper here, routing algorithms for multipoint to multipoint communication supporting resource reservation are studied. Two routing schemes are proposed. Using the routing algorithm 2, a feasible communication distribution tree can be constructed. Since algorithm 2 adopts the mechanism that avoids using the high load links, more communication distribution tree can be allocated in a network. Simulation results and their analysis are also given.
Key words：unicast, multipoint-to-multipoint conmmunication, resource reservation, quality of service▲
1　引　　言
　　计算机网络技术已成为计算机应用的核心技术之一.它是分布式计算、计算机辅助协同工作、计算机多媒体应用技术、自动化技术、通信技术、信息系统工程等新技术的基础.
　　目前Internet所提供的服务主要是“尽力传送(best effort)”的服务.即尽最大努力传送但不能保证质量.为了能满足不断涌现的新型应用的要求，例如远程视频会议、分布式模拟等，计算机网络除了在硬件设备，如光缆、通信卫星等提供支持外，还必须在网络协议、软件方面予以支持.如提供实时的服务质量保障，提供合理地共享链路的带宽等网络资源的控制措施［1］.资源预定协议(RSVP)［2,3］为网络资源利用提供了一个控制方法.为了在Internet 上提供综合业务的服务，支持资源预定协议，现有的路由协议必须加以扩充.
　　计算机通信从信息发送者和信息接收者的个数来看，有一个发送者和一个接收者的通信，即单目通信.还有一个发送者和多个接收者以及多个发送者和多个接收者的通信，即多目通信.一些多目通信协议已经提出，例如MOSPF［3］，DVMP［4］.它们建立一个以发送者为根的最短距离树.对于MOSPF，DVMP协议来说，同一个通信组中若有多个发送者就会建立多棵以发送者为根的通信树.对于以往的以“尽力传送”的服务来说，多棵通信树除了在路由器上保留的路由信息比一棵通信树保留的要多一些之外，其它的网络资源利用效率方面本质的区别不大.可是，“尽力传送”服务已不能满足不断涌现的新型的通信任务的要求.当前一些应用问题对通信的质量很敏感，例如视屏电视会议、分布式模拟等要求保证有足够带宽，对时延和丢失率都有具体的限制.因此，对于这类通信问题不仅要求根据当前的拓扑结构寻找通信路径或通信树，而且要求在所找到的路径或通信树上有足够的资源.网络系统通过资源预定等机制来保障服务质量.一个多目通信任务往往有多个发送者.例如，视频会议有几个有发言权的与会者就有几个发送者.若给每一个发送者都预定一棵通信树，则会占用大量的网络资源.而像视频会议这样的通信任务多个有发言权的与会者同时发言的情况是很少的，这样可能造成预定的大量的网络资源被闲置，而需要使用网络资源的通信任务又无法使用网络资源.
　　在任一时期，网络资源总是有限的.为了利用有限的网络资源提供尽可能多尽可能高的服务质量，我们研究了在提供资源服务也能充分利用带宽资源的路由算法.给出了两个不同的多目通信的路由算法.它们为每个通信组预定一棵共享的通信树，同一通信组的成员利用这棵通信树接收和发送数据.第2节给出了一些基本概念.第3节阐述了我们提出的两个算法.第4节对算法的性能进行了分析与比较.
2　多目通信的路由问题
　　为了研究路由问题我们首先将一个计算机网络抽象成一个赋权有向图.图1描述了一个计算机网络的自治系统［4］.图2是图1所示的计算机网络的抽象的赋权有向图，图中每对相邻结点之间应该有两条不同方向的弧(为了简单起见，图2中每对相邻结点之间只画了一条弧，并且表示方向的箭头及弧上的权也都省略了).图1中RT1～RT12是路由器，用椭圆表示；N1～N11是共享介质的局域网，用一条直线或折线(如N3，N6，N9)表示；H1，Ma都是局域网中的主机，用矩形表示.各主机Ma都是同一通信组A中的成员.从路由的角度来讲，从局域网中的一个主机到自治系统中的某结点的路径与从这个局域网到这个结点的路径是一样的.所以从路由的角度来讲，我们可以不区分局域网和局域网中的主机，在下面的讨论中结点集的成员往往位于局域网中的主机中.例如图2中的结点集中没有画出局域网N1，N2，N3，N6，N7，N11等局域网中通信组A的组成员Ma.实际上，从某个主机Ma到某个结点的路径与图中Ma所在的局域网到这个结点的路径是一样的.由此，我们在下面给出了计算机网络的抽象表示.


图1　一个计算机网络自治系统


图2　一个计算机网络自治系统对应的图
　　计算机网络的抽象表示：在研究计算机网络的路由问题时，其拓扑结构可用一个赋权有向图来表示.在本文中，用赋权有向图G=(V,E,C,D)表示一个计算机网络，其中V是结点的集合，一个结点或者是路由器或者是一个局域网；E是弧的集合；权函数C：E→R是弧的集合E到实数集R的函数，若e∈E, 则 C(e) 表示链路e上的可用的资源总量(如总的可用的带宽)；权函数D：E→R是弧的集合E到实数集R的函数，若e∈E, 则 D(e) 表示报文经过链路e时的长度(如平均时延).
　　在计算机网络中通信问题按照发送者和接收者的数量来分可以分成两类.单目通信，即一个发送者和一个接收者.多目通信，即一个(多个)发送者和多个接收者.单目通信的路由问题就是要寻找一条从发送者到接收者的路径.参加一个多目通信的发送者和接收者全体称为多目通信组.一个多目通信组使用一个D类IP地址.多目通信的路由问题就是要寻找一条连接这个多目通信组的所有成员的一棵树，称为通信树.不同的多目通信的路由算法构造不同的通信树.目前主要有两种.一种是整个多目通信组共享的通信树.另一种是以发送者为根的通信树，在这种情况下若有多个发送者，则有多棵通信树.每个路由器利用路由表的一个项来标记通信树的一个结点.一个路由器通过路由表中的一项来表示自己是某个多目通信组的通信树上的一个结点.路由器根据报文的目标地址(单目通信是接收者的地址，多目通信是组地址)以及路由表中相应的项来确定向哪个接口(单目通信是一个接口，多目通信可能是多个接口)转发.路由协议的任务就是要规定在路由器之间交换路由信息的方式，根据收集的路由信息利用路由算法计算出到任意一个目标地址应向哪些接口转发，即构造出路由表.
　　为了叙述问题和描述算法方便起见，先对本文中将要用到的几个符号做一些说明.
　　一个多目通信，一般有一个或多个发送者和多个接收者.在考虑像电视会议这样的多目通信时，往往要考虑这个多目通信任务要求保障的带宽.设有向赋权图G=(V,E,C,D)是一个计算机网络的抽象，我们用(S,T,f)表示一个通信任务，其中SV，TV，f为一正数，S称为通信任务的发送者集，T称为通信任务的接收者集合.f称为通信任务的通信量，即这个多目通信任务要求保障的带宽，关于f的商定的问题我们将在下面作进一步讨论.G上的通信任务全体记为T(G).当S，T为单点集时，即|S|=1，|T|=1时，通信任务就成为单目通信(unicast); 当|S|≥1，|T|＞1时通信任务就成为多目通信(multicast).
　　设有向赋权图G=(V,E,C,D)是一个计算机网络的抽象，若有ai∈V，i=1,2,…,k，s,t∈V,使得(s,a1)∈E，(ak,t)∈E，(ai,ai+1)∈E，i=1,2, …,k-1.则将s到t的路径s(s,a1)a1(a1,a2)a2…ak (ak,t)记为p(s,t)，s到t的不同的路径的全体记为(s,t). 对于任一图G，用V(G)表示图G的结点的集合，用E(G)表示图G的边的集合.设s,t∈V，从s到t的最短距离记为d(s,t) (在本文中距离d(s,t)都是按权函数D计算的)，T是G的一棵子树，则记d(s,T)=min{d(s,t) |t∈T }为结点到子树T的距离，记p(s,T)=arg min{d(s,t) | p(s,t)∈P(s,t), t∈T}为s到子树T的一条最短路的路径，为了符号简单起见，我们也用p(s,T)表示在这条路径上所有边的集合.
　　当为一个通信任务预定一棵通信树时，就是要在计算机网络的抽象图中选择一个边的集合，对这个边的集合中每条边所对应链路预定这个通信任务所有求的带宽.设有向赋权图G=(V,E,C,D)是一个计算机网络的抽象，q=(S,T,f)为一个通信任务，DTE，若s∈S，t∈T，p(s,t)∈P(s,t)，使E(p(s,t))DT，则称DT为通信任务q=(S,T,f)的一个通信树.DT(q)表示通信任务q的所有通信树的集合.也就是说通信任务q的一个通信树是一棵包含通信任务q的所有发送者和所有接收者的一棵子树.
　　问题1. 设有向赋权图G=(V,E,C,D)是一个计算机网络的抽象，q=(S,T,f)为一个通信任务，问题称为最小资源通信树问题.若R*∈DT(q)，且对任意的R∈DT(q)满足，则称R*为通信任务q的最小资源通信树.
　　设G=(V,E,D)是一个有向赋权图，SV，T是G的子树，若SV(T)，且任意给定G的子树T′,当V(T′)S，必有则称T为G中关于S的Steiner树.(V,S,E,D)表示上述的Steiner树问题.
　　对于单目通信来说最小资源通信树就是两结点间的最短路.对于多目通信来说最小资源通信树就是Steiner树.
　　在支持资源预定的路由协议中，为一个通信组选择通信树时，不仅要考虑通信树要能连接所有的通信组成员，还要考虑这棵通信树的每条边是否都能满足资源预定的条件.而通信树的每条边是否都能满足资源预定的条件又与网络系统内的当前的负载状态有关.设有向赋权图G=(V,E,C,
D)是一个计算机网络的抽象，我们用赋权图S=(V,E,F)表示G的一个状态，其中F是E到实数集R的映射，e∈E，F(e)表示当前链路e上的可用带宽.S(G)表示G的所有的状态的集合.设S=(V,E,F)是G的一个状态，q=(S,T,f)是一个通信任务，DT∈DT(q)是通信任务q的一棵通信树，若min{F(e)|e∈DT}≥f，则称DT是在状态S下通信任务q的可行通信树，即一个任务的可行通信树中的每一条边的剩余可用带宽都必须大于该通信任务所要求的带宽.映射P：S(G)×T(G)→2E称为G的一个路由算法，其中2E为集合E的所有子集的集合，符号×是笛卡尔积，也就是说一个路由算法就是根据网络的当前状态和一个给定的通信任务选择出一个可行通信树的方法.
　　设有向赋权图G=(V,E,C,D)是一个计算机网络的抽象，P为G的一个路由算法； qi=(Si,Ti,fi)，i=1,2,…,n，是一个通信任务序列，记为Q；s0=(V,E,F0)是分配q1之前的状态；若p(si-1,qi)是在状态si-1=(V,E,Fi-1)下qi的可行通信树，则当e∈p(si-1, qi-1)时，令Fi(e)=Fi-1(e)-fi；当e