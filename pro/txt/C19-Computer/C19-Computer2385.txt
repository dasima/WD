计算机研究与发展
JOURNAL OF COMPUTER RESEARCH AND DEVELOPMENT
1999年 第36卷 第9期 Vol.36 No.9 1999



数字电路并发差错检测的新概念
江建慧　闵应骅　施鸿宝
摘　要　并发差错检测是提高数字电路与系统可信性的重要技术.文中建立了一种基本并发差错检测电路的结构模型，它由实现电路基本功能的基本功能模块和实现电路并发差错检测功能的检测器两部分级联所构成；提出了表征基于部分自校验概念的并发差错检测机制的一组新概念：精简强故障保险、精简强变量分离、精简强自校验、k-容错精简强故障保险、k-容错精简强变量分离和k-容错精简强自校验，并研究了数字电路并发差错检测的主要概念之间的关系；证明了用基本功能模块与检测器互连，以构造具有不同并发差错检测特性的基本电路所需满足的条件.　　
关键词　部分自校验，精简强故障保险，精简强变量分离，k-容错精简强故障保险，k-容错精简强变量分离，电路互连
中图法分类号　TP302.8；TP331.1
NEW CONCEPTS OF CONCURRENT ERROR DETECTION FOR DIGITAL CIRCUITS
JIANG Jian-Hui SHI Hong-Bao
Institute of Computing Technology, Shanghai Tiedao University, Shanghai 200331
MIN Ying-Hua JIANG Jian-Hui
CAD Laboratory, Institute of Computing Technology, Chinese Academy of Sciences, Beijing 100080
Abstract　Concurrent error detection is important for improving dependability of digital circuits and systems. In this paper, a structure module for basic concurrent error detection circuit is built. It is constructed by a basic functional module and a detector. Several new concepts, reduced strongly fault secure, reduced strongly variable disjoint, reduced strongly self-checking, k-fault-tolerant reduced strongly fault secure, k- fault-tolerant reduced strongly variable disjoint, and k- fault-tolerant reduced strongly self-checking are defined to characterize circuits with partially self-checking capability. The relations among all of these concepts about concurrent error detection are presented. Interconnection conditions, with which the basic functional modules and detectors must satisfy to construct basic circuits with different concurrent error detection properties, are proved.
Key words　partially self-checking, reduced strongly fault secure, reduced strongly variable disjoint, k-fault-tolerant reduced strongly fault secure, k-fault-tolerant reduced strongly variable disjoint, circuit interconnection
1　引言
　　并发差错检测、故障安全和差错校正是数字电路和系统容错的三类重要技术，并发差错检测技术直接为系统的在线重构提供支持，故障安全技术用于防卫数字电路出现非安全差错，差错校正技术用于保证产生故障的电路仍尽可能地给出正确输出［1，2］.随着数字电路集成规模和应用领域的不断扩大、工作速度的飞速提高，它们可望进入保证高性能集成电路正常工作的基本技术之列.
　　一个典型的故障(差错)处理过程包括故障(差错)检测、定位、差错校正或重构和恢复等步骤.一个理想的电路在内部产生故障时，希望其功能输出保持安全或正确，同时还应给出相应的差错检测或故障定位指示信息.并发差错检测电路在正常工作条件下能自动检测其内部(包含差错检测电路本身)是否存在故障，它只需正常输入(电路的所有测试码均包含其中)，而无需任何外加激励(测试码)［1～3］.因此，为进一步提高容错系统的在线故障(差错)处理能力，继续深入研究并发差错检测技术仍具有相当重要的意义.
　　80年代中期以前有关并发差错检测技术研究的主要成果在许多文献中都作了较为系统的总结［1～3］.本文第2部分建立了一种基本并发差错检测电路(以下简称基本电路)的结构模型，它由实现电路基本功能的基本功能模块和实现电路并发差错检测功能的检测器(detector)两部分级联所构成，电路的输出矢量被划分成功能输出和差错检测指示输出两部分：第3部分总结了自校验电路的基本功能模块与校验器(checker)的基本特性；第4部分在输出矢量划分的结构模型下重新定义了基本电路的若干特性，提出了一组表征基于部分自校验(partially self-checking，PSC)概念的并发差错检测机制的新概念，并着重研究了这些新概念与已有概念之间的关系，这些新概念还指出了构造并发差错检测电路的新途径；第5部分证明了用基本功能模块与检测器互连，以构造具有不同并发差错检测特性的基本电路所需满足的条件.
2　基本电路的模块结构与故障假设
　　一个具有m个输入和n个输出的组合逻辑电路，它所实现的函数表示为G，它的所有可能的原始输入矢量X(矢量长度为m)组成它的完全输入集，记作S(Xm)，所有可能的原始输出矢量Y(矢量长度为n)组成它的完全输出集，记作S(Yn).电路的所有合法输入矢量构成它的合法输入矢量集，记作Sn(Xm)，对应的所有合法输出矢量构成合法输出矢量集，记作Sn(Yn).对编码矢量，合法矢量集由所有码字组成，非法矢量集由所有非码字组成.S(Xm)-Sn(Xm)被称为是非法输入矢量集，记作Sa(Xm).S(Yn)-Sn(Yn).被称为非法输出矢量集，记作Sa(Yn).
　　基本电路的原始输出Y可被分割为两部分(Z，E)，其中，Z(矢量长度为u)和E(矢量长度为v) 分别为电路的功能输出和差错检测指示输出［4］ ，u+v=n.所有的功能输出和差错检测指示输出分别组成基本电路的功能输出集S(Zu)和差错检测指示输出集S(Ev).类似地，S(Zu)可作如下划分：S(Zu)=Sn(Zu)∪Sa(Zu)，其中，Sn(Zu)和Sa(Zu)分别表示合法功能输出矢量集和非法功能输出矢量集.S(Ev)也可作如下划分：S(Ev)=Sn(Ev)∪Sa(Ev)，其中，Sn(Ev)是电路的功能输出无差错指示矢量集，电路给出该集合中的矢量，表明其功能输出是正确的；Sa(Ev)是电路出现差错指示矢量集，电路给出该集合中的矢量，表明其内部出现了故障，故障所引起的差错已被检测到.然而，由于S(Yn)=S(Zu)×S(Ev)，因此从逻辑上考虑，S(Yn)可划分为3部分，即
S(Yn)=Sn(Yn)∪Sd(Yn)∪Su(Yn),
每一部分的组成分别为
Sn(Yn)={(Z,E)|Z∈Sn(Zu)∧E∈Sn(Ev)},
Sd(Yn)={(Z,E)|Z∈S(Zu)∧E∈Sa(Ev)},
Su(Yn)={(Z,E)|Z∈Sa(Zu)∧E∈Sn(Ev)}.
其中，Sd(Yn)表示差错检测输出矢量集，Su(Yn)表示未定义(无意义)输出矢量集，它们组成了基本电路的非法输出矢量集.由于检测器防护范围的界限是从基本功能模块的输入端至检测器的输出端，那么，根据输出矢量所代表的实际意义，当Z为非法输出时，E不可能给出合法输出，因此，可假设Su(Yn)=，表示空集.
　　一个基本电路由两个部分级联而成(如图1所示)，一是实现函数Ω的基本功能模块，二是实现函数Θd的检测器.在图1中，W∈S(Ww)(矢量长度为w)是基本功能模块的输出（也是检测器的输入），其它变量的意义如前所述.S(Ww)是基本功能模块的完全输出矢量集，即检测器的完全输入矢量集，它也可划分为合法输入集Sn(Ww)与非法输入集Sa(Ww)两个互不相交的子集.因此，X∈S(Xm)，有Ω(X)=W，Θd(W)=Y，或者G(X)=Y.若(Z，E)被表示为或(ΘZd(W),ΘEd(W))或(GZ（X），GE（X）)，则在正常情况下，应有ΘZd(W)=GZ(X)和ΘZd(W)=GE(X).

图1　基本并发差错检测电路的结构模型
　　对一个基本自校验电路(见图2)，上述模型中的检测器可看成是由一组传输线(实现ΘZd，直接将完整的W或其中一部分送至检测器的功能输出端)和校验器(实现ΘEd)所组成的.

图2　基本自校验电路的典型结构
　　基本电路可用作构造并发差错检测系统的基本元件.
　　本文约定，若不特别指出，所研究的数字电路满足假设1.设基本电路所考虑的所有单故障所组成的故障集为F，产生内部故障后电路所实现的函数表示为Gf.
　　假设1. 电路中的每一故障均可按门级或开关级故障加以模型化.
　　针对不同的实际电路，需要采用不同严格程度的故障假设，以便合理地表征其并发差错检测能力.下面的假设2便是一个严格的故障假设，它常被用于作为定义并发差错检测概念，如完全自校验(totally self-checking，TSC)，的基本假设.假设3是文献［5］有关故障假设的简单修改.
　　假设2. 电路在任一时刻只产生一个故障，且任意两个连续产生的故障之间的时间间隔足够长，可使所有所需的输入矢量出现在电路的输入端上.
　　假设3. 当一个影响检测器(校验器)的故障发生后，电路有足够的时间在基本功能模块或检测器(校验器)产生另一个故障前，使得检测器(校验器)能够将其合法输入集中的所有输入矢量加到它的输入端.当一个影响基本功能模块的故障发生后，电路有足够的时间在基本功能模块或检测器(校验器)产生另一个故障前，使得基本功能模块能够将其合法输入集中的所有输入矢量加到它的输入端.
3　自校验电路基础
3.1　基本功能模块(基本电路)的构造途径
　　基本自校验电路的并发差错检测特性可由完全自校验概念来表征，它所实现的是所谓的完全自校验目标(TSC goal).若把电路的输入和输出矢量看成是某种差错检测码，则完全自校验目标指的是在给定的故障假设下，电路由于故障而产生的第一个非法输出总是一个非码字［6，7］.实现完全自校验目标可有如下途径.
　　途径1. 使电路同时具有故障保险(fault secure，FSE)和自测试(self-testing，ST)两个基本特性［1～3］.这是一条相当严格的实现途径，因为电路存在冗余的可能性很大，而对于f∈F是冗余的电路将无法对于F具有自测试特性.因此，电路按此途径实现较为困难.
　　途径2. 使电路具有强故障保险(strongly FSE，SFSE)特性［6，7］.
　　在现有VLSI实现技术条件下，这一途径的实现也有一定的困难.实际电路可通过限制电路所考虑的故障序列的长度来有限地实现完全自校验目标(见如下途径).
　　途径3. 使电路具有k-容错部分强故障保险(k- fault tolerant partially SFSE，k-FT PSFSE)特性［8］.
　　当并发差错检测电路所具有的完全自校验特性仅对F的某个子集有效时，可用部分自校验概念来对它进行描述［1，9］，这是通过缩小电路所考虑的故障集来有限地实现完全自校验目标的方法.
　　途径4. 使电路具有部分自校验特性［1］.
　　另外，若电路对合法输入集与FST（FSTF）是自测试的，但对合法输入集的某个子集及FST的某个子集不是故障保险的，则可用自测试特性来对其进行描述［1，10］.类似地，若任意输入矢量都能检测电路中的故障，则可用强自测试(strongly ST，SST)特性来对其进行表征［1，10］.
3.2　校验器的特性
　　若一个电路具有码分离(code-disjoint，CD)、故障保险和自测试特性，则该电路被称作为完全自校验校验器［1，3］.然而，在有的情况下，故障保险特性对校验器而言并不是必须的［11］，这种校验器可被简称为自校验校验器.若校验器的自测试特性难以满足，则在满足假设3的前提下，可构造一种具有强码分离(strongly CD，SCD)特性的校验器［5］.近年来，针对电路的不同实现技术，已提出了若干种新型校验器的实现方案.
　　(1) k-容错部分强码分离校验器与k-容错部分强故障保险校验器［8，12］
　　强码分离校验器在一般情况下是较难实现的.考虑到VLSI电路在开关级和布局上物理故障的特点，实际获得的是k-容错部分强码分离(k-fault-tolerant partially SCD，k-FT PSCD) 校验器与k-容错部分强故障保险校验器.强码分离校验器与k-容错部分强码分离校验器的区别主要在于，前者可通过一个输入码字最终将校验器中的所有累积故障检测到，而后者最多能容忍k-1个故障，且它们能否被检测是不确定的.k-容错部分强码分离校验器在内部产生了一个长度为k的故障序列后，它就处于非保险状态.此时若再有一个非码字加到它的输入端(等价于基本电路中产生了k+1个故障)，则其码分离特性是不保证的.
　　(2) 强自校验校验器［13］
　　若一个并发差错检测系统中含有多个具有不同特性的校验器，为使其达到完全自校验目标，还必须采用一种强自校验(strongly self-checking，SSC)校验器，它同时具有强故障保险和强码分离特性.
　　(3) k-容错部分强自校验校验器［8］
　　类似于强码分离校验器与k-容错部分强码分离校验器的关系，也有一种k-容错部分强自校验(k-FT partially SSC，k-FT PSSC) 校验器，文献［8］称之为k-容错部分强码分离和部分强故障保险校验器.
4　输出矢量划分模型下基本电路的特性
4.1　检测器的特性
　　在图1所示的基本电路结构模型下，基本功能模块与基本电路的并发差错检测特性的表征可直接沿用自校验电路有关特性的定义，但由于检测器的输出矢量作了划分，因此有关检测器的若干并发差错检测概念需重新定义.
　　检测器的主要功能是检查基本功能模块输出矢量的合法性，并将基本电路所产生的故障及时地检测出来.本文采用变量分离(variable disjoint，VD)概念来表征这一功能［1］.若将输入或输出矢量统一地看成是用编码方式生成的码字，则变量分离特性就是码分离特性.
　　定义1. 一个检测器是变量分离的，若它满足① 