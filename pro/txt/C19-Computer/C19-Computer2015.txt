微型机与应用
MICROCOMPUTER & ITS APPLICATIONS
1999年 第18卷 第4期 Vol.18 No.4 1999



嵌入式实时数据库系统及其相关问题*
董荣胜　古天龙　庞 健雄
　　摘　要：嵌入式实时数据库系统(ERTDBS)的特性、与传统数据库 系统的区别，并对今后值得重视和研究的问题进行了探讨。
　　关键词：嵌入式实时数据库系统　并发控制　网络
　　计算机作为一个系统的核心或关键部件，同系统中的其它部分协同作用来完 成整个系统的任 务，即计算机镶嵌在系统中发挥其作用，这类计算机系统称为嵌入式计算机应用系统，简称 嵌入式系统。其中，实时性是嵌入式系统所要满足的一个极其重要的特性，一些专家将嵌入 式系统称为嵌入式实时系统。在该系统中，对数据库的操作具有定时限制的特性，这里把应 用于嵌入式系统的数据库系统称为嵌入式数据库系统或嵌入式实时数据库系统(ERTDBS)， 相对强(Hard)实时系统和弱(Soft)实时系统而言，ERTDBS可分为强ERTDBS和弱ERTDBS两类， ERTDBS与传统数据库系统有着本质的区别：它具有定时限制事务的特性，系统的正确性必须 满足通常用截止时间表示的定时限制。对于强实时事务，错过截止时间可能导致灾难［ 1］。E RTDBS是嵌入式系统中的一个重要子课题，本文将从ERTDBS的基本特性入手，对本领域今后 研究工作的焦点和值得重视的问题进行讨论。
1　嵌入式实时数据库与传统关系数据库的比较
　　与传统的RDBS相比，ERTDBS首先应具有定时限制的特性，并应用于嵌入式系统中，为此，ER TDBS要求在无人监控条件下系统运行的可靠性、RAM和DISK最低需求的可预见性以及对I/O操 作的低层控制能力。同时根据嵌入式系统的分布特性，ERTDBS还应该具备分布式的特性，除 了应用的特殊环境外，ERTDBS与分布式实时数据库系统(DRTDBS)的研究是相似的，以下就ER TDBS的特性作简要阐述。
1.1　传统RDBS与ERTDBS的事务和数据特性的不同
　　目前流行的RDBS其事务具有传统的ACID(Atomicity、Cosistency、Isolation、Durability) 特性，即原子性、一致性、隔离性和永久性。事务执行的原子性和可串行性是被普遍接受的 正 确性和一致性标准。而ERTDB则有根本性的不同，其事务和数据的重要特性在于事务的定时 性和可预测性、数据和事务的时态特性［3］。需要强调的是ERTDBS中的实时性 并不等于快速性，更重要的在于事务随时间变化的可预测性［2］。
1．2　与传统数据库并发控制性能研究的区别
　　ERTDBS需要同时满足定时限制和在这段时间内保持数据库的一致性的要求，这些要求使问 题变得更为复杂，这是涉及并发控制研究的一个重要问题。
　　相对ERTDBS而言，传统的非实时并发控制不需要在数据库中确定数据调度处理的优先级 。因此，有可能造成1个低优先级事务阻塞1个高优先级事务，从而导致数据冲突，这种情况 叫优先级倒置，它会影响实时调度算法。如果这种情况发生在ERTDBS 中， 由于ERTDBS中的数据存放在不同地点，再加上分布式事务管理、分布式死锁的解决和 复制数据等需求，这个问题就变得更加复杂和严重。
　　有关ERTDBS中的并发控制研究得到了学术界的广泛关注，在ERTDBS中有多种实时并发控制协 议。这里列出2个著名的协议：①高优先级两阶段锁(H2PL)协议。在这个协议中， 低优先级处理被重新起动，从而解决了优先级倒置的问题，同时，1个高优先级事务请求被 低 优先级事务占用的锁时，低优先级事务重新启动的代价又是H2PL的1个问题。②解决优先 级 倒置的方法是优先级继承(PI)［6］，当高优先级事务请求上锁时，低优先级事务锁 占有者放 弃其优先级，并继承高优先级事务的优先级，这样中等优先级事务便不可抢占低优先级事务 了，从而达到限制阻塞时间的目的，虽然这种方式仍然存在优先级倒置，但它能减少高优先 级事务请求锁的阻塞时间，使锁占有者是正在执行的1个高优先级事务。不过，在分布式环 境和分布式死锁问题上，PI事务的优先级继承问题代价又较大。
　　作为未来的工作，解决优先级倒置问题的调度还有很大的发展空间，目标将是能最大限度地 减小这种调度对另一些事务调度性能降低的影响。
1．3　来自网络层对ERTDBS并发控制的影响
　　与传统数据库系统相比，在ERTDBS并发控制协议的研究中，一个重要的因素是支持分布 式环境的网络层［4］。
　　在未来，用户将采集的信息存放在网络上的不同地点的数据库中必然会产生更多的通信 量，这些信息包括传统数据、视频、图像、语言序列等。越来越多的多媒体信息需要高带 宽来支持。ERTDBS需求高带宽的通信量，而网络承担这个工作的能力显然超出了人们的期望，同时 高速网络也带来了在设计和开发ERTDBS方面的重要影响。因此，高负载网络上的ERTDBS的性 能研究将是未来的一个重要方向。
2　今后研究工作的焦点及值得关注的几个问题
　　传统数据库并发协议修改后在一些弱实时系统中实现了对高优先级事务的优先的处理。ERTDBS的主要目标是使事务错过截止时间的数量减至最少，因此在弱实时系统中应选择好 的调度协议进行设计。
　　对强截止时间和该事务需求的应用，系统必须保证事务在截止时间内完成。对这样的事务， 必须使用新的数据库协议去解决资源分配和事务处理的需要。新的数据库并行调度协议要保 证所有事务都能享受资源，并能处理它们的截止时间。在一些模拟实验中评价了扩展的调度 协议［5］，新的观点已被提出，在定义数据和事务的时间特性方 面的研究已取得初步的进展［3］。
　　对ERTDBS的研究，仍处在早期阶段，如在数据模型、可预测性事务执行、恢复、I/O管理、 超载处理、操作系统支持、工具支持、分布式系统支持等方面尚有很多需要解决的问题。
　　当前ERTDBS研究的焦点集中在“浅”(Flat)的、弱实时事务的读/写操作上。不久的将来， 需求ERTDBS的应用将变得巨大、复杂和分布，事务将必须在高动态环境中操作，这些事务的 执行仍然需要可预测。它们要存取分布式多媒体目标，还要面对以几何级数增加的数据信息 。
　　解决上述问题，将依赖以下几方面的工作，这些工作将成为今后研究工作的焦点［3 ］。
　　1．依赖实时事务和具有指定时间特性并用精确方式定义的时态数据库模型技术的发展，必 须清晰地指定数据存储的有效性和定时限制。
　　2．依赖有关具有时间特性事务的研究方法学的发展，给出一个应用时间特性和设置时间需 求的断言表示，目标是有关断言时间的指定。如果断言是通过1个用时间指定的定理推导的 ，由 于事务处理具有准确的时间指定，那么这个系统是安全的。否则，由于时间特性带来的断言 没有遵循定理的推导，因此这个系统具有本质的不安全性。
　　3．依赖基于调度协议和并发控制协议的时间驱动优先级策略的发展，需要一个动态方式集 成管理资源(例如：通信资源和I/O设备)以及实现强制优先的具有定时限制的复杂事务的执 行。
　　4．操作系统和数据管理要求高度集成和协作并具有很快的可预测能力，因为1个数据库系 统 必须操作在有效的操作系统中，正确的执行和数据库的时间特性分配依赖于操作系统的服务 。
　　5．在实时数据管理协议中，人工智能和主动数据库技术的集成为定时限制处理提供了有关 推理的方法，这些方法要适应系统特征的动态变化情况。一个值得考虑的问题是：当有几个 不同定时限制的事务请求时，主动实时数据管理要确定最有效的执行次序。
　　在讨论焦点问题的同时，在嵌入式领域有2个新的动向值得关注。
　　1．基于PC机的ERTDB技术研究
　　纵观计算机发展的历史，展望计算机发展的未来，可以肯定地说，受目前嵌入式计算机的物 理结构(例如形态、体积、重量等)和能力的特殊限制而产生的有关问题将得到解决。事实上 ，现有的嵌入式计算机可以成功地采用经过后天加固的民用PC机，这一事实，引起了业界广 泛的关注，不少厂家相继推出基于X86的嵌入式实时系统软件和应用软件，这对推动ERTDB研 究有十分重要的意义。
　　2．Java在嵌入式系统中的应用研究
　　当前，计算机界对Java应用非常重视，特别是在计算机网络上的应用，已经得到了全世界的 一致赞许。众所周知，Java最初是为嵌入式应用而设计的，Java重新对嵌入式应用产 生吸引力，不仅是因为Java语言简单、开发周期短、具有C语言特征等优点，还在于Java语 言的安全性以及将嵌入式实时系统中的时间特性封装在对象中的能力，它不仅使嵌入式用户 可以放心地开发自己的Java应用程序，而且使嵌入式环境连成网络成为可能，我们认为未来 的ERTDB将普遍采用面向对象数据库或对象-关系数据库方式实现，在这类C/S结构的嵌入式 数据库中，用Java编制客户程序将受到越来越多的关注。
3　结束语
　　计算机技术的迅速发展，为ERTDBS的研究提供了很多有利的条件，在ERTDBS领域还有许多挑 战性的问题有待于研究和探讨。
作者单位：桂林电子工业学院计算机分院(541004)
*　本文工作为广西科学基金和广西教委跨世纪人才基金资助项目．
参考文献
　1　Shin K G.Real-Time Computing:A New Discipline of Computer Science and Engineering.Proceedings of The IEEE，1994;82(1)
　2　古天龙，蔡国永，庞健雄.嵌入式实时系统及其相关问题.电子科技导报，1997；(12)
　3　Son S H.Real-Time Database Systems:Present and Future.1995 IEEE 2th International Workshop on Real-time Computer Systems and applications,1995
　4　Lee V C S.Impact of high speed network on performance of real-time concu rrency control protocol.Journal of Systems Architecture，1996；42
　5　Abbott R，Garcia-Molina H.Scheduling Real-Time transactions:A Performance Eva luation.ACM Trans.on Database Systems，1992；17(3)
　6　Sha L，Rajkumar R，Lehoczky J.Priority inhertance protocols:an approach to r eal-time synchronization.IEEE Transacrions on Computers，1990;39
收稿日期：1998-11-10
