自动化学报
ACTA AUTOMATICA SINICA
1998年 第24卷 第1期  Vol.24  No.1 1998



用神经网络实现精密伺服系统
中扰动力矩的动态补偿
徐立新　张宇河　王常虹　庄显义
摘　要　分析了扰动力矩对精密伺服系统的影响. 提出使用神经网络方法建立扰动力矩的数学模型， 并根据全补偿原则设计补偿环节， 实现扰动力矩的动态补偿. 试验结果表明这种新的补偿方法对提高伺服系统的精度十分有效， 具有实际应用价值. 
关键词　伺服系统， 扰动力矩， 神经网络， 动态补偿. 
DYNAMIC COMPENSATION FOR DISTURBING MOMENT IN
ACCURATE SERVO SYSTEM BASED ON NEURAL NETWORKS
XU LIXIN　　ZHANG YUHE
(Department of Automatic Control, Beijing Institute of Technology, Beijing 100081)

WANG CHANGHONG　　ZHUANG XIANYI
(Department of Control Engineering, Harbin Institute of Technology, Harbin 150001)
Abstract　The affection of disturbing moment in servo system is discussed in this article at first, then we use the feedforward neural network to build the mathematic model of the disturbing moment, and design the transfer functin for compensation. Experiment shows that the new method is effective to improve the accuracy of the servo system.
Key words　Servo system, disturbing moment, neural network, dynamic compensation.
1　引言
　　精密伺服系统已被广泛应用于航天控制领域，如惯性导航设备中的测试转台，导弹半实物仿真中的仿真转台，红外目标背景模拟装置中的光学随动系统. 这些系统均要求有较高的跟踪和定位精度. 但伺服系统精度的提高却受到以摩擦力矩为主的扰动力矩的限制. 
　　本文首先回顾了历史上对扰动力矩的补偿方法， 指出其局限性，进而应用神经网络技术建立扰动力矩模型，最后使用工控计算机实现扰动力矩的动态补偿. 
2　扰动力矩模型建立
2.1　扰动力矩分析
　　精密伺服系统中的扰动力矩主要是摩擦力矩，此外还有负载阻转力矩. 摩擦力矩的大小与电机结构， 润滑特性，负载大小和速率有关. 负载阻转力矩主要与负载有关. 由于扰动力矩是提高伺服系统精度的主要障碍， 已有许多学者在这一领域做了大量工作，取得了一些成果. 文献［1］考察冷轧机，造纸机等对象， 将负载力矩看做是阶跃型“常值”的，设计状态观测器以测量负载力矩，并使用前馈控制加以补偿，取得了较好的效果. 文献［2］研究了精密转台中的摩擦力矩模型， 在负载力矩一定的条件下， 实验测得摩擦力矩与速率的关系，提出了摩擦力矩的两种数学模型， 其中摩擦力矩表示为MF， 速率表示为ω. 
　　1) 分段线性模型　如图1所示. 
　　　　　　　　　　　　(1)


图1　分段线性模型
其中

MS与MC分别为最大静摩擦力矩和库仑摩擦力矩，M2为转台运行过程中对应速率ω2所测得的摩擦力矩. 
　　2) 慢变常值模型，即认为摩擦力矩在一定范围内是常值，
　　　　　　　　　　　　　　　　　　　　 (2)
　　文献［2］根据上述摩擦力矩模型设计状态观测器， 使用不变性原理进行前馈补偿， 切实提高了转台系统的跟踪精度. 但是，文献［1］中仅考察了常值阻转力矩作为扰动力矩. 文献［2］给出摩擦力矩的分段线性模型. 由于近似模型比较粗糙，不能如实反映摩擦力矩的真实情况，当摩擦力矩处于过零和零附近的过渡过程状态时，难以获得有效结果. 综上所述，能否同时考虑摩擦力矩和负载力矩，并建立较为精确的摩擦力矩和负载力矩模型是提高伺服系统精度的关键问题. 
2.2　神经网络建模方法
　　用神经网络方法建立扰动力矩模型. 神经网络是近十几年发展起来的一门新兴学科，主要研究由简单处理单元大规模互连而成的网络的整体特性. 控制和辨识领域中所广泛利用的是其逼近非线性函数的能力［3］和自组织、自适应、自学习的特点. 
　　设计较为简单的前向网络，利用其逼近非线性函数能力，建立起扰动力矩的数学模型. 由于扰动力矩主要是摩擦力矩和恒值负载阻转矩， 忽略随机扰动力矩影响， 可认为当系统和负载一定时， 扰动力矩是速率(ω)的非线性函数. 显然这是一静态过程. 使用前向神经元网络建立这一非线性模型. 为使训练方便， 分别对于正转(ω＞0)和反转(ω＜0)建立神经网络模型. 由于分别逼近较为简单的非线性函数，网络权值训练容易收敛. 选用多层前向网络实现，设计每个网络含一个输入节点，一个输出节点，根据样本数量，选用8个隐节点. 隐节点激励函数为双曲正切函数tanh(x)=(1-exp(-2x))/(1+exp(-2x))， 输出节点激励函数为线性函数. 网络结构建立以后， 设计试验获得输入为速率， 输出为扰动力矩的数据样本. 给定某恒值角速率ω，测量电机电枢电流I. 已知电机力矩平衡关系式

其中KM为转矩常数. 因速率为定值，即有即可由电枢电流换算出扰动力矩
这样我们就得到一组数据样本(ω,). 以其作为教师训练多层前向网络权值. 为保证训练网络的有效性，训练样本数据应覆盖较大范围. 
2.3　神经网络学习算法
　　BP算法是一种常用的神经网络训练方法，但存在局部极小总理 ，本文使用一种随机寻优方法训练前向网络权值. 这是一种具有较强全局收敛性， 不依赖于网络结构和激励函数的并行寻优方法，该算法建立在模拟退火思想上，所谓模拟退火是基于统计物理中，对固体物质进行退火处理时，通常先将它加温，使其中的粒子可以自由运动，然后随着温度的逐渐下降， 粒子也逐渐形成了低能态的晶格. 若在凝结点附近的温度下降速率足够慢， 则固体物质一定会形成最低能量的基态. 对于组合优化问题来说， 它也有这样类似的过程. 这里将网络学习视作组合优化问题， 目标是通过调整连接权值以极小化误差函数E. 
　　设Wi,j为神经元i和神经元j之间的连接权， 在第k次迭代，
Wi,j(k)=Wi,j(k-1)+δi,j(k). 　　　　　　　　　　　　　　(3)
其中
　　　　　　　　　　　　　　(4)
δ为一小正数，即权值每次依概率前进或回退一个δ. 概率pi,j(k)为玻尔兹曼分布
　　　　　　　　　　　　　　(5)
其中T(k)与模拟退火算法相似， 被称作温度， 在优化过程中其应逐渐降低，Ci，j(k)表示权值改变与误差变化的相关量
　　　　　　　　　　　　　　(6)
其中

算法总是倾向于使误差目标函数E减小的权值变化［4］，大量仿真结果表明该算法有较好的全局收敛能力，且计算速度比BP算法快［5］. 用该方法训练多层前向网络，算法实现简单，效果良好.
3　扰动力矩的动态补偿
3.1　补偿装置设计
　　网络权值经离线训练后，即获得扰动力矩的神经网络模型. 与图1所示的摩擦力矩分段线性模型相比，低速段表现为光滑的非线性曲线， 高速段接近线性关系. 
　　伺服系统及补偿环节设计如图2所示. 实时采样测速反馈信号， 通过神经网络模型计算扰动力矩的大小， 为实现扰动力矩的全补偿， 计算补偿环节传函为
