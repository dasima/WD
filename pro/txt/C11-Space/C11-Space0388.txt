航空动力学报
JOURNAL OF AEROSPACE POWER
1999年　第14卷　第2期　Vol.14　No.2　1999



可扩展的燃气轮机仿真对象模型*
谢志武**　苏明　翁史烈
　　【摘要】　应用面向对象的分析与设计方法进行可扩展的燃气轮机仿真建模研究。将燃气轮机仿真的各种计算任务概括为部件计算、流路计算和系统状态计算三个层次，并在此基础上提出节点-连接器-部件模型，构造了一个部件模型、工质流程及仿真算法均可扩展的仿真类属框架，并通过一个三轴燃气轮机的容积效应法仿真验证了该模型的有效性和可扩展能力。
　　主题词：　燃气轮机　仿真　建立模型
　　分类号：　TK47　TP31
1　前言
　　在简单循环燃气轮机的基础上，通过增删部件和改变工质流程可以得到各种以燃气轮机为核心的复杂动力装置。在这类装置的仿真建模中应用面向对象方法可以方便地重用已有的源代码，因而不仅加速了建模过程［1-6］，而且为构造通用的燃气轮机仿真软件奠定了基础［6-8］。
　　面向对象方法的各种优越性最终都必须通过软件扩展来实现。对于燃气轮机仿真模型而言，需要扩展的不仅有部件和工质流程，而且还应该包括仿真算法。本文运用统一建模语言［9］（Unified Modeling Language，简称UML）及其建议软件开发过程对燃气轮机仿真问题进行了面向对象的分析、设计和实现，所获得的燃气轮机仿真模型在部件、工质流程以及仿真算法各方面都具有高度的可扩展能力。
2　可扩展的燃气轮机仿真类属层次结构
　　软件的可扩展能力首先表现在其类属层次结构上，只有高度概括的父类才有可能使不同特化层次的子类在其上扩展。
　　为概括各种燃气轮机仿真的共性，将燃气轮机仿真中的各种计算任务概括为既相互联系又有明确分工的三个层次：部件计算、流路计算和系统状态计算。其中，部件计算以单个部件的特性为依据，根据该部件的已知参数求解其他未知参数，如根据压气机的转速、压比求解流量和效率等。部件计算仅局限于单个部件内部而不涉及部件间的相互影响，何时进行哪个部件的计算由流路计算来控制。流路计算定义系统中各部件间的相互关系，规划部件计算的次序和参数传递方向，并掌握计算结束的判据。流路计算方法包括顺算法、逆算法［10］、容积效应法［11］等。流路计算结束时，系统中的所有部件均已求解且相互间满足一定条件，如顺算法要求通流部分满足压力和流量平衡，而容积效应法则仅需压力平衡即可。系统状态计算从流路计算的结果中获得系统的动态信息，然后用欧拉法、龙格-库塔法或辛算法等数值积分方法求解系统的下一个状态。
　　三层次概括对稳态仿真和动态仿真同样适用。以牛顿―莱普生法为例，稳态仿真时有如下迭代公式：

其中，是系统的状态变量，k是残量。流路计算结束后先求残量k和J矩阵，然后对J求逆，就可由第k轮迭代的系统状态k解出残量更小的第（k+1）轮系统状态k+1。上述计算虽然不包含时间因素，但与动态仿真中对右函数作数值积分一样，都是从流路计算的结果出发求解系统下一轮的状态，因而也属于系统状态计算。
　　燃气轮机仿真的三个层次是相互联系、相互依赖的。流路计算既控制部件计算的进行，其结果又是系统状态计算的依据，系统状态计算更为下一轮部件计算准备数据。因此，实际仿真计算时这三个层次的计算任务是交替进行的。


图1　可扩展的燃气轮机仿真类属层次结构示意图
　　根据燃气轮机仿真的三层次概括可以构造一个仿真类属框架。首先为上述三个层次的仿真计算任务构造相应的抽象类，然后以他们为父类扩展出各种不同抽象层次的子类。例如，可以从部件类Component派生压气机类Compressor，从流路计算类GasPathCalc派生容积效应法类VolumeEffCalc或从系统状态计算类SysStateCalc派生欧拉法类Euler等等。图1是这个类属层次结构的UML表述，其中，目字形方框代表类，虚线箭头代表依赖关系，实线三角箭头代表继承关系。图1所示的类属层次框架为部件以及流路计算和系统状态计算方法的扩展奠定了基础。下面详细介绍其中部件类的细节。 
3　节点―连接器―部件模型
　　为了表达工质流程的变化，本文之前的各种燃气轮机对象模型都构造了工质流类。但是，工质流类的存在极大地限制了流路计算方法的扩展。图2给出了采用常规顺算法、逆算法［10］及容积效应法［11］时高、低压压气机间的各种数据的传递方向。尽管这3种数据传递方式有明显不同，但采用工质流类表达时，由于它同时封装了温度、压力和流量信息，因此难以显式地表达上述差别。为了最大限度地提高模型的可扩展能力，本文废弃了工质流类，转而构造了一个更灵活多变的类属结构，称为节点―连接器―部件模型。


图2　采用不同算法时高、低压压气机间的数据传递示意图
　　首先对仿真中出现的各种物理量进行分类整理，将相互间存在一一对应关系的各种变量合成一类。例如，由于工质流的温度t、焓i、等压比热cp、相对压力的自然对数lnPai0以及相对压力的自然对数对温度的导数dlnPai0间存在一一对应关系，因此用一个流体温度类TFluidNode来概括所有这些变量。若在仿真中需要传递某种工质的焓值，则只需传递相应的TFluidNode对象，它会自动进行相应的数值转换。同理，油气比f、摩尔燃料系数beta、纯燃气在燃气中的摩尔成分b和纯燃气在燃气中的质量成分bm之间的一一对应关系也可以用一个油气比类FNode来概括。
　　为方便以后在系统中扩展新的物理量，需要为上述各物理量构造一个公共父类，称之为节点类（Node）。节点类及其子类的关系见图3，其中Node类的各子类自左至右分别代表转速对时间的导数、功率、流量、油气比、流体温度、压力、压力对时间的导数以及转速，流体温度类TFluidNode还派生出空气温度和纯燃气对空气温度的修正项两个子类。必要时，还可以在此基础上继续扩展出其他物理量。

　　　
图3　节点类与连接器类示意图　　　　图4　压气机类包含的各种对象
　　接着建立各部件类与节点类之间的关系。如图4所示，以压气机类为例，它包含空气温度节点和压力节点对象各两个（分别代表进、出口空气的温度和压力，注意温度对象同时还隐含了焓、等压比热等信息）以及流量、转速和功率节点对象各一个。UML规定用实心菱形箭头表示值包含关系，箭头上的文字标注和数字分别表示包含关系的名称和双方的数量。
　　各部件所包含的节点间要进行数据传递，因此需要一个连接器类（Connector）来完成这一功能。连接器类和节点类的关系见图3，其中的空心菱形箭头代表引用型包含关系。
　　在节点―连接器―部件模型中，根据实际情况的不同，一个真实部件可能需要由几个软件部件对象拼接起来，其间的数据联系也可能与实际的物理联系有所不同。图5是用容积效应法仿真时高、低压压气机模型的图形界面实例，其中与部件相连的圆代表从属于该部件的各种节点，而粗线箭头代表连接器。由于低压压气机存在泄漏，因此增加了专门用于处理流量损耗的支管（Manifold）部件。注意到这里压气机与支管之间可以只交换流量信息而无须同时交换温度、压力信息，而且容积效应部件与各压气机之间的温度、压力、流量信息也可以分取不同的传递方向，因此就比用工质流类对象来传递数据的对象模型要灵活得多。在节点―连接器―部件模型中，各种不同的工质流程和流路计算方法都可以借助连接器的不同设置而轻易实现。


图5　容积效应法仿真时高、低压压气机模型的图形界面实例
　　需要说明的是，作为一种软件构造范式，面向对象方法仅仅改变仿真数学模型在计算机上的表达方式，却不会对原问题的逼真度和收敛特性造成任何影响。具体地说，仿真程序的逼真度取决于数学模型的精细程度，收敛特性则取决于与该数学模型相对应的包括流路计算方法和系统状态计算方法在内的数值求解方案。对一段传统的过程式仿真程序进行面向对象化改写，虽然会使程序结构和指令调用过程变得相对复杂，但它仍然遵循原有数学模型和算法所设定的计算任务和计算次序，因而计算结果必然与原程序完全相同。
　　另一方面，由于不同仿真问题可能提出不同的精度和速度要求，因而一个通用的燃气轮机仿真软件不仅需要具备为各种部件建立不同精度数学模型的能力，还必须能够对数值计算方法做相应调整。本文的仿真模型通过提供部件模型以及流路计算和系统状态计算方法上的可扩展能力保证了各种精度和速度要求的仿真任务都能在同一仿真软件环境内得以实现。
4　算例
　　使用上述对象模型进行了某三轴燃气轮机动态性能仿真。仿真采用燃气轮机非线性数学模型［12］，各部件特性均已知，并且考虑了进排气压损、压气机抽气及涡轮冷却等因素。流路计算方法采用速度快、收敛性和稳定性均较好的容积效应法［11］，系统状态计算采用常用的欧拉法。采用UML进行面向对象的分析和设计，然后用C++语言编程实现。

　　　　　
图6　油量阶跃增时的转速响应　　　　图7　油量阶跃减时的转速响应
　　表1是从前述类属框架中扩展得到的各个类及其实例化后得到的对象。用这些对象可以拼接出系统的仿真模型。图6和图7给出了机组各转子转速对油量阶跃微扰的动态响应计算结果，与常规过程式仿真的结果完全一致。仿真的时间步长设为5 ms，在Pentium Ⅱ 233 MHz微机上，每步计算耗时3.5 ms，可以满足实时仿真的速度要求。
表1　某三轴燃气轮机动态特性仿真的对象配置说明

对 象 名所 属 类 名简　　要　　说　　明
lpc
hpc
hpt
lpt
pt
com
d1,d2,d3,d4
m1,m2,m3,m4
l1
v1,v2,v3,v4
rh,rl,rp
c1～c56SpeyLPC
SpeyHPC
SpeyHPT
SpeyLPT
SpeyPT
Combustor
DuctDelta
ManifoldGLC
Load
VolumeInertia
RotorInertia
ConnectorCompressor的子类，采用某机组低压压气机特性
Compressor的子类，采用某机组高压压气机特性
Turbine的子类，采用某机组高压涡轮特性
Turbine的子类，采用某机组低压涡轮特性
Turbine的子类，采用某机组动力涡轮特性

Duct的子类，Component的孙类，压损为常数
Manifold的子类，Component的孙类，流量损失为常数
负荷，Component的子类
容积惯性，Component的子类
转子惯性，Component的子类


5　结论
　　本文以可扩展能力为中心，综合运用面向对象的分析和设计方法，以燃气轮机仿真三层次概括为依据，构造了一个可扩展的仿真类属框架。本文提出并实现了节点―连接器―部件模型，并通过算例验证了该模型的有效性和可扩展能力。本文的工作为快速有效地进行热力系统建模仿真开辟了新方向。
*本文系中国船舶工业总公司“九五”预研资助项目
作者简介:**男　28岁　博士　讲师　武汉市海军工程学院305教研室　430033
作者单位:谢志武　海军工程学院
　　　　　苏明　翁史烈　上海交通大学
参考文献
　　1　Heyen G, Murphy K, Marchio D,et al.Dynamic Simulation and Control of Gas Turbine and Compressor Systems.Computers in Chemical Engineering,1994,18(11/12):1071-1082
　　2　Ho P Y,Ng P S.Object-Oriented Approach to Gas Turbine Performance Computation.ASME Paper 96-GT-165,1996
　　3　Drummond C K,Follen G J,Putt C W.Gas Turbine System Simulation:An Object-Oriented Approach.NASA TM 106044,1992
　　4　Drummond C K,Follen G J,Cannon M.Objected-Oriented Technology for Compressor Simulation. AIAA 94-3095, 1994
　　5　Curlett B P,Felder J L.Object-Oriented Approach for Gas Turbine Engine Simulation.NASA TM 106970,1995
　　6　谢志武，陈德来，洪波．燃气轮机稳态性能仿真的面向对象设计与实现．上海交通大学学报，1998，32(7): 58-62
　　7　谢志武，陈德来，翁史烈．面向对象的燃气轮机仿真建模：综述与展望．热能动力工程，1998，13(5)：243-246
　　8　谢志武．面向对象的燃气轮机仿真研究：［博士学位论文］．上海：上海交通大学动力与能源工程学院涡轮机研究所，1998
　　9　Rational Software Corporation. UML Summary. Version 1.1.1, 1997
　　10　 Wang Y.A New Method of Predicting the Performance of Gas Turbine Engines.ASME Journal of Engineering for Gas Turbines and Power,1991,113:106-111
　　11　苏明，翁史烈．汽轮机系统仿真中一种容积环节仿真模型及其解．动力工程，1998，18(2)：75-78
　　12　翁史烈．燃气轮机性能分析．上海：上海交通大学出版社，1987：87-92
（责任编辑　杨再荣）
1998年7月收稿；1998年11月收到修改稿。
